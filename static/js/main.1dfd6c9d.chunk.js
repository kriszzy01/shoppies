(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(9),i=n(2),o=function(e){return e.nominations},l=function(e){return e.searchResults},u=function(){var e=[],t=[],n=window.localStorage;if(0!==n.length)for(var r=0;r<=n.length-1;r++){var c=n.key(r),a=n.getItem(c);a&&(t.push(c),e.push(JSON.parse(a)))}return{previousNominations:e,previousIds:t}},d=function(){var e=Object(i.c)(o).movies,t=u().previousNominations,n=0!==t.length?t:Object.values(e);return Object(r.jsx)("div",{role:"banner","data-banner":5===n.length?"open":"closed",children:Object(r.jsx)("p",{children:"All done! You have successfully made your five nominations"})})},j=n(27),b=n(26),h=n(7),v=Object(h.b)({name:"nominations",initialState:{id:[],movies:{}},reducers:{deleteNomination:function(e,t){var n=t.payload,r=e.id.filter((function(e){return e!==n}));e.id=r;var c=e.movies,a=(c[n],Object(j.a)(c,[n].map(b.a)));e.movies=a},addNomination:function(e,t){var n=t.payload;e.id.push(n.imdbID),e.movies[n.imdbID]=n}}}),O=v.actions,p=O.deleteNomination,m=O.addNomination,x=v.reducer,f=function(){var e=Object(i.c)(o).movies,t=u().previousNominations,n=0!==t.length?t:Object.values(e),a=Object(i.b)(),s=Object(c.useRef)("");return Object(r.jsxs)("aside",{"aria-label":"nominations",children:[0!==n.length&&Object(r.jsx)("h2",{children:"Nominations"}),Object(r.jsx)("div",{className:"empty-state",children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Your nominations appear here."})," ",Object(r.jsx)("br",{}),Object(r.jsx)("span",{children:"Nominations are saved even after leaving the browser"})]})}),Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{className:"text",children:[e.Title," (",e.Year.slice(0,4),")"]}),Object(r.jsxs)("button",{type:"button","aria-label":"Delete ".concat(e.Title),onClick:function(){return n=e.imdbID,a(p(n)),window.localStorage.removeItem(n),void(s.current="removed ".concat(t[t.length-1].Title," from nominations"));var n},children:[Object(r.jsx)("span",{"aria-hidden":"true",children:"Remove"}),Object(r.jsxs)("span",{className:"vh",children:["Remove ","".concat(e.Title)]})]})]},e.imdbID)}))}),Object(r.jsx)("div",{role:"status","aria-live":"polite",className:"vh",children:s.current})]})},g=n(6),w=n(25),y=n.n(w),N=n(5),S=n.n(N),I=n(8),k=n(14),D=n.n(k),R="1f8395e",M=function(){var e=Object(I.a)(S.a.mark((function e(t,n){var r,c,a,s,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://www.omdbapi.com/?s=".concat(t,"&page=").concat(n,"&apikey=").concat(R),e.prev=1,e.next=4,D.a.get(r);case 4:return c=e.sent,a=c.data,s=a.Search,i=a.totalResults,e.abrupt("return",{Search:s,totalResults:i});case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(I.a)(S.a.mark((function e(t){var n,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://www.omdbapi.com/?i=".concat(t,"&apikey=").concat(R),e.next=3,D.a.get(n);case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(h.b)({name:"search",initialState:{totalResults:"",searchedInput:"",id:[],movies:{},loading:!1,error:null},reducers:{setSearchedInput:function(e,t){var n=t.payload;e.searchedInput=n},searchMoviesStart:function(e){e.id=[],e.movies={},e.loading=!0,e.error=null},searchMoviesSuccess:function(e,t){var n=t.payload;n.Search.forEach((function(t){var n=t.imdbID;e.id.push(n),e.movies[n]=t})),e.totalResults=n.totalResults,e.loading=!1,e.error=null},searchMoviesFailure:function(e,t){var n=t.payload;e.error=n,e.loading=!1},setMovieDetails:function(e,t){var n=t.payload;e.movies[n.imdbID].Detail=n}}}),E=T.actions,P=E.searchMoviesStart,A=E.searchMoviesSuccess,Y=E.searchMoviesFailure,F=E.setSearchedInput,J=E.setMovieDetails,q=T.reducer,z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=Object(I.a)(S.a.mark((function n(r){var c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(P()),n.next=4,M(e,t);case 4:c=n.sent,r(A(c)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(Y(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},L=function(){var e=Object(c.useState)(""),t=Object(g.a)(e,2),n=t[0],a=t[1],s=Object(i.b)(),o=Object(c.useCallback)(y()((function(e){s(z(e)),s(F(e))}),500),[]);return Object(r.jsxs)("header",{className:"headerContainer",children:[Object(r.jsx)("h1",{children:"Shoppies"}),Object(r.jsxs)("div",{className:"searchInput",children:[Object(r.jsx)("i",{"aria-hidden":"true",children:Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",children:[Object(r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})}),Object(r.jsx)("label",{htmlFor:"search",className:"vh",children:"Enter the title of a movie to search"}),Object(r.jsx)("input",{type:"text",id:"search",placeholder:"Enter movie title",value:n,onChange:function(e){var t=e.target.value;a(t),o(t)}})]})]})},G=function(){var e=Object(i.c)(l),t=e.totalResults,n=e.searchedInput,a=e.error,s=e.loading,o=Object(c.useState)(2),u=Object(g.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(n),h=Object(g.a)(b,2),v=h[0],O=h[1];Object(c.useEffect)((function(){j(2),O(n)}),[n]);var p=Object(i.b)(),m=Math.floor(Number(t)/10),x=d<=m,f=d>2;return Object(r.jsx)(r.Fragment,{children:n&&!a&&Object(r.jsxs)("div",{className:"pagination",children:[Object(r.jsxs)("h3",{children:["Page ",d-1," of ",m<1?1:m]}),Object(r.jsx)("button",{type:"button",onClick:function(){s||(j((function(e){return e-1})),p(z(v,d-2)))},"aria-label":"Previous Page",disabled:!f,children:"Prev"}),Object(r.jsx)("button",{type:"button",onClick:function(){s||(j((function(e){return e+1})),p(z(v,d)))},"aria-label":"Next Page",disabled:!x,children:"Next"})]})})},B=n(28),H=function(e){var t,n=e.movieId,c=e.handleModal,a=null===(t=Object(i.c)(l).movies[n])||void 0===t?void 0:t.Detail;return Object(r.jsxs)("div",{"data-modal":n?"show":"hide",tabIndex:-1,children:[a?Object(r.jsx)(W,Object(B.a)({},a)):Object(r.jsx)("h2",{children:"Loading..."}),Object(r.jsx)("button",{type:"button","aria-label":"close modal",onClick:function(){return c("")},children:"close"})]})},W=function(e){var t=e.Actors,n=e.imdbRating,c=e.Genre,a=e.Poster,s=e.Plot,i=e.Title,o=e.Year,l=e.Released;return Object(r.jsxs)("div",{className:"modal-text",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("img",{src:a,alt:i}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{children:[i," (",o,") ",Object(r.jsx)("span",{className:"rating",children:n})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Released:"})," ",l]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Genre:"})," ",c]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Cast:"})," ",t]})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Synopsis"}),Object(r.jsx)("p",{children:s})]})]})},K=function(){var e=Object(c.useState)(""),t=Object(g.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){var e;n&&(null===(e=document.querySelector("body"))||void 0===e||e.setAttribute("data-modal-open",""));return function(){var e;null===(e=document.querySelector("body"))||void 0===e||e.removeAttribute("data-modal-open")}}),[n]);var s=Object(i.c)(l),d=s.movies,j=s.loading,b=s.searchedInput,h=s.error,v=(Object(i.c)(o).id,u()),O=v.previousNominations,p=v.previousIds,x=Object(i.b)(),f=Object(c.useRef)(""),w=function(e){d[e].Detail||x(function(e){return function(){var t=Object(I.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:r=t.sent,n(J(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),a(e)};return Object(r.jsxs)("section",{"aria-label":"Search Results",children:[b&&Object(r.jsx)("h2",{"data-loading":j,children:Q(j,h,b)}),Object(r.jsx)("div",{className:"empty-state",children:Object(r.jsxs)("p",{children:["Search for a movie to nominate using the search bar. ",Object(r.jsx)("br",{}),Object(r.jsxs)("strong",{children:["Your search results appear here ",Object(r.jsx)("span",{"aria-hidden":"true",children:"\u2193"})]})]})}),Object(r.jsx)("ul",{children:Object.values(d).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{className:"text",children:[e.Title," (",e.Year.slice(0,4),")",Object(r.jsx)("button",{type:"button",onClick:function(){return w(e.imdbID)},"aria-label":"show details of ".concat(e.Detail),children:Object(r.jsx)("svg",{width:"20",height:"20",version:"1.1",viewBox:"0 0 8.4667 8.4667",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsxs)("g",{fillRule:"evenodd",strokeWidth:".26458",fill:"white",children:[Object(r.jsx)("ellipse",{cx:".82682",cy:"4.2522",rx:".87407",ry:".82682"}),Object(r.jsx)("ellipse",{cx:"4.2286",cy:"4.2522",rx:".87407",ry:".82682"}),Object(r.jsx)("ellipse",{cx:"7.6304",cy:"4.2522",rx:".87407",ry:".82682"})]})})})]}),Object(r.jsxs)("button",{type:"button","aria-label":"Nominate ".concat(e.Title),onClick:function(){return function(e){var t=d[e];O.length<5&&(x(m(t)),window.localStorage.setItem(e,JSON.stringify(t)),f.current="nominated ".concat(t.Title))}(e.imdbID)},disabled:5===p.length,"data-nominated":p.includes(e.imdbID),children:[Object(r.jsx)("span",{"aria-hidden":"true",children:p.includes(e.imdbID)?"Nominated":"Nominate"}),Object(r.jsxs)("span",{className:"vh",children:["Nominate ","".concat(e.Title)]})]})]},e.imdbID)}))}),Object(r.jsx)(H,{movieId:n,handleModal:a}),Object(r.jsx)(G,{}),Object(r.jsx)("div",{role:"status","aria-live":"polite",className:"vh",children:f.current})]})},Q=function(e,t,n){return e?"Loading...":t&&"Network Error"!==t&&n?"Are you sure this movie exists?":"Network Error"===t&&n?"Something went wrong":n?'Search Results for "'.concat(n,'"'):null},U=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L,{}),Object(r.jsxs)("main",{children:[Object(r.jsx)(d,{}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(K,{}),Object(r.jsx)(f,{})]})]}),Object(r.jsx)("footer",{})]})},V=n(4),X=Object(V.c)({nominations:x,searchResults:q}),Z=(n(58),Object(h.a)({reducer:X}));Object(s.render)(Object(r.jsx)(i.a,{store:Z,children:Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(U,{})})}),document.querySelector("#root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.1dfd6c9d.chunk.js.map