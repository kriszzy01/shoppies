(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(8),i=n(2),o=function(e){return e.nominations},l=function(e){return e.searchResults},u=function(){for(var e=[],t=[],n=window.localStorage,r=0;r<=n.length-1;r++){var a="";0!==n.length&&(a=n.key(r));var c=n.getItem(a);c&&(t.push(a),e.push(JSON.parse(c)))}return{previousNominations:e,previousIds:t}},d=function(){var e=Object(i.c)(o).movies,t=u().previousNominations,n=0!==t.length?t:Object.values(e);return Object(r.jsx)("div",{role:"banner","data-banner":5===n.length?"open":"closed",children:Object(r.jsx)("p",{children:"All done! You have successfully made your five nominations"})})},j=n(27),h=n(26),b=n(5),v=Object(b.b)({name:"nominations",initialState:{id:[],movies:{}},reducers:{deleteNomination:function(e,t){var n=t.payload,r=e.id.filter((function(e){return e!==n}));e.id=r;var a=e.movies,c=(a[n],Object(j.a)(a,[n].map(h.a)));e.movies=c},addNomination:function(e,t){var n=t.payload;e.id.push(n.imdbID),e.movies[n.imdbID]=n}}}),m=v.actions,O=m.deleteNomination,p=m.addNomination,x=v.reducer,f=function(){var e=Object(i.c)(o).movies,t=u().previousNominations,n=0!==t.length?t:Object.values(e),c=Object(i.b)(),s=Object(a.useRef)("");return Object(r.jsxs)("aside",{"aria-label":"nominations",children:[0!==n.length&&Object(r.jsx)("h2",{children:"Nominations"}),Object(r.jsx)("div",{className:"empty-state",children:Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Your nominations appear here."})," ",Object(r.jsx)("br",{}),Object(r.jsx)("span",{children:"Nominations are saved even after leaving the browser"})]})}),Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{className:"text",children:[e.Title," (",e.Year.slice(0,4),")"]}),Object(r.jsxs)("button",{type:"button","aria-label":"Delete ".concat(e.Title),onClick:function(){return n=e.imdbID,c(O(n)),window.localStorage.removeItem(n),void(s.current="removed ".concat(t[t.length-1].Title," from nominations"));var n},children:[Object(r.jsx)("span",{"aria-hidden":"true",children:"Remove"}),Object(r.jsxs)("span",{className:"vh",children:["Remove ","".concat(e.Title)]})]})]},e.imdbID)}))}),Object(r.jsx)("div",{role:"status","aria-live":"polite",className:"vh",children:s.current})]})},g=n(7),N=n(24),S=n.n(N),w=n(6),y=n.n(w),I=n(9),k=n(25),R=n.n(k),D=function(){var e=Object(I.a)(y.a.mark((function e(t,n){var r,a,c,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"1f8395e",r="https://www.omdbapi.com/?s=".concat(t,"&page=").concat(n,"&apikey=").concat("1f8395e"),e.prev=2,e.next=5,R.a.get(r);case 5:return a=e.sent,c=a.data,s=c.Search,i=c.totalResults,e.abrupt("return",{Search:s,totalResults:i});case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),M=Object(b.b)({name:"search",initialState:{totalResults:"",searchedInput:"",id:[],movies:{},loading:!1,error:null},reducers:{setSearchedInput:function(e,t){var n=t.payload;e.searchedInput=n},searchMoviesStart:function(e){e.id=[],e.movies={},e.loading=!0,e.error=null},searchMoviesSuccess:function(e,t){var n=t.payload;n.Search.forEach((function(t){var n=t.imdbID;e.id.push(n),e.movies[n]=t})),e.totalResults=n.totalResults,e.loading=!1,e.error=null},searchMoviesFailure:function(e,t){var n=t.payload;e.error=n,e.loading=!1}}}),C=M.actions,T=C.searchMoviesStart,E=C.searchMoviesSuccess,F=C.searchMoviesFailure,P=C.setSearchedInput,Y=M.reducer,J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=Object(I.a)(y.a.mark((function n(r){var a;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(T()),n.next=4,D(e,t);case 4:a=n.sent,r(E(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(F(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},z=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],c=t[1],s=Object(i.b)(),o=Object(a.useCallback)(S()((function(e){s(J(e)),s(P(e))}),500),[]);return Object(r.jsxs)("header",{className:"headerContainer",children:[Object(r.jsx)("h1",{children:"Shoppies"}),Object(r.jsxs)("div",{className:"searchInput",children:[Object(r.jsx)("i",{"aria-hidden":"true",children:Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",children:[Object(r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})}),Object(r.jsx)("label",{htmlFor:"search",className:"vh",children:"Enter the title of a movie to search"}),Object(r.jsx)("input",{type:"text",id:"search",placeholder:"Enter movie title",value:n,onChange:function(e){var t=e.target.value;c(t),o(t)}})]})]})},A=function(){var e=Object(i.c)(l),t=e.totalResults,n=e.searchedInput,c=e.error,s=e.loading,o=Object(a.useState)(2),u=Object(g.a)(o,2),d=u[0],j=u[1],h=Object(a.useState)(n),b=Object(g.a)(h,2),v=b[0],m=b[1];Object(a.useEffect)((function(){j(2),m(n)}),[n]);var O=Object(i.b)(),p=Math.floor(Number(t)/10),x=d<=p,f=d>2;return Object(r.jsx)(r.Fragment,{children:n&&!c&&Object(r.jsxs)("div",{className:"pagination",children:[Object(r.jsxs)("h3",{children:["Page ",d-1," of ",p<1?1:p]}),Object(r.jsx)("button",{type:"button",onClick:function(){s||(j((function(e){return e-1})),O(J(v,d-2)))},"aria-label":"Previous Page",disabled:!f,children:"Prev"}),Object(r.jsx)("button",{type:"button",onClick:function(){s||(j((function(e){return e+1})),O(J(v,d)))},"aria-label":"Next Page",disabled:!x,children:"Next"})]})})},L=function(){var e=Object(i.c)(l),t=e.movies,n=e.loading,c=e.searchedInput,s=e.error,d=(Object(i.c)(o).id,u()),j=d.previousNominations,h=d.previousIds,b=Object(i.b)(),v=Object(a.useRef)("");return Object(r.jsxs)("section",{"aria-label":"Search Results",children:[c&&Object(r.jsx)("h2",{children:q(n,s,c)}),Object(r.jsx)("div",{className:"empty-state",children:Object(r.jsxs)("p",{children:["Search for a movie to nominate using the search bar. ",Object(r.jsx)("br",{}),Object(r.jsxs)("strong",{children:["Your search results appear here ",Object(r.jsx)("span",{"aria-hidden":"true",children:"\u2193"})]})]})}),Object(r.jsx)("ul",{children:Object.values(t).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{className:"text",children:[e.Title," (",e.Year.slice(0,4),")"]}),Object(r.jsxs)("button",{type:"button","aria-label":"Nominate ".concat(e.Title),onClick:function(){return function(e){var n=t[e];j.length<5&&(b(p(n)),window.localStorage.setItem(e,JSON.stringify(n)),v.current="nominated ".concat(n.Title))}(e.imdbID)},disabled:5===h.length,"data-nominated":h.includes(e.imdbID),children:[Object(r.jsx)("span",{"aria-hidden":"true",children:h.includes(e.imdbID)?"Nominated":"Nominate"}),Object(r.jsxs)("span",{className:"vh",children:["Nominate ","".concat(e.Title)]})]})]},e.imdbID)}))}),Object(r.jsx)(A,{}),Object(r.jsx)("div",{role:"status","aria-live":"polite",className:"vh",children:v.current})]})},q=function(e,t,n){return e?"Loading...":t&&"Network Error"!==t&&n?"Are you sure this movie exists?":"Network Error"===t&&n?"Something went wrong":n?'Search Results for "'.concat(n,'"'):null},H=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(z,{}),Object(r.jsxs)("main",{children:[Object(r.jsx)(d,{}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(L,{}),Object(r.jsx)(f,{})]})]}),Object(r.jsx)("footer",{})]})},B=n(4),G=Object(B.c)({nominations:x,searchResults:Y}),K=(n(57),Object(b.a)({reducer:G}));Object(s.render)(Object(r.jsx)(i.a,{store:K,children:Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(H,{})})}),document.querySelector("#root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.d76f16bf.chunk.js.map